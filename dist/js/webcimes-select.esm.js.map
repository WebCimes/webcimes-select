{"version":3,"file":"js/webcimes-select.esm.js","mappings":"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","sources":["webpack://webcimes-select/webpack/bootstrap","webpack://webcimes-select/webpack/runtime/define property getters","webpack://webcimes-select/webpack/runtime/hasOwnProperty shorthand","webpack://webcimes-select/./src/ts/webcimes-select.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","/**\r\n * Copyright (c) 2023 WebCimes - RICHARD Florian (https://webcimes.com)\r\n * MIT License - https://choosealicense.com/licenses/mit/\r\n * Date: 2023-03-25\r\n */\r\n\r\n\"use strict\";\r\n\r\n/**\r\n * Global\r\n */\r\ndeclare global {\r\n\t/** Events */\r\n\tinterface GlobalEventHandlersEventMap {\r\n\t\tbeforeShow: CustomEvent;\r\n\t\tafterShow: CustomEvent;\r\n\t\tbeforeDestroy: CustomEvent;\r\n\t\tafterDestroy: CustomEvent;\r\n\t}\r\n}\r\n\r\n/**\r\n * Options\r\n */\r\ninterface Options {\r\n\t/** Element (selector string or HTMLElement) */\r\n\telement: string | HTMLElement | null;\r\n\t/** set a specific id on the select. default \"null\" */\r\n\tsetId: string | null;\r\n\t/** set a specific class on the select, default \"null\" */\r\n\tsetClass: string | null;\r\n\t/** width (specify unit), default \"auto\" */\r\n\twidth: string;\r\n\t/** height (specify unit), default \"auto\" */\r\n\theight: string;\r\n\t/** max-height for options list (specify unit), default \"200px\" */\r\n\tmaxHeightOptions: string;\r\n\t/** add extra css style to select, default null */\r\n\tstyle: string | null;\r\n\t/** set placeholder text, default null */\r\n\tplaceholder: string | null;\r\n\t/** allow clear selected options, default true */\r\n\tallowClear: boolean;\r\n\t/** allow search options, default true */\r\n\tallowSearch: boolean;\r\n\t/** autofocus on search field when open select, default true */\r\n\tsearchAutoFocus: boolean;\r\n\t/** set placeholder text on search field, default \"Search\" */\r\n\tsearchPlaceholder: string | null;\r\n\t/** set text for no results found on search, default \"No results found\" */\r\n\tsearchTextNoResults: string | null;\r\n\t/** callback before show select */\r\n\tbeforeShow(): void;\r\n\t/** callback after show select */\r\n\tafterShow(): void;\r\n\t/** callback before destroy select */\r\n\tbeforeDestroy(): void;\r\n\t/** callback after destroy select */\r\n\tafterDestroy(): void;\r\n}\r\n\r\n/**\r\n * Class WebcimesSelect\r\n */\r\nexport class WebcimesSelect\r\n{\r\n\t/** Get the dom element of the current select */\r\n\tpublic select: HTMLSelectElement | null;\r\n\t\r\n\t/** Get the dom element of the current webcimesSelect */\r\n\tpublic webcimesSelect: HTMLElement;\r\n\t\r\n\t/** Get the dom element of the current webcimesDropDown */\r\n\tpublic webcimesDropDown: HTMLElement | null = null;\r\n\r\n\t/** Options of the current select */\r\n\tprivate options: Options;\r\n\r\n\t/**\r\n\t * Convert elements entry to an array of HTMLElement\r\n\t */\r\n\tprivate getHtmlElements(element: string | HTMLElement | NodeList | null)\r\n\t{\r\n\t\t// Convert options.element to an array of HTMLElement\r\n\t\tlet htmlElements: HTMLElement[] = [];\r\n\t\tif(element instanceof NodeList)\r\n\t\t{\r\n\t\t\thtmlElements = [...Array.from(element) as HTMLElement[]];\r\n\t\t}\r\n\t\tif(element instanceof HTMLElement)\r\n\t\t{\r\n\t\t\thtmlElements = [...[element]];\r\n\t\t}\r\n\t\tif(typeof element === \"string\")\r\n\t\t{\r\n\t\t\thtmlElements = [...Array.from(document.querySelectorAll(element)) as HTMLElement[]];\r\n\t\t}\r\n\t\treturn htmlElements;\r\n\t}\r\n\r\n\t/**\r\n\t * Convert element entry to an HTMLElement\r\n\t */\r\n\tprivate getHtmlElement(element: string | HTMLElement | null)\r\n\t{\r\n\t\t// Convert options.element to an array of HTMLElement\r\n\t\tlet htmlElement: HTMLElement | null = null;\r\n\t\tif(element instanceof HTMLElement)\r\n\t\t{\r\n\t\t\thtmlElement = element;\r\n\t\t}\r\n\t\tif(typeof element === \"string\")\r\n\t\t{\r\n\t\t\thtmlElement = document.querySelector(element) as HTMLElement | null;\r\n\t\t}\r\n\t\treturn htmlElement;\r\n\t}\r\n\r\n\t/**\r\n\t * Set value (or placeholder) on webcimesSelect\r\n\t */\r\n\tprivate setWebcimesSelectValue()\r\n\t{\r\n\t\tif(this.select)\r\n\t\t{\r\n\t\t\t// If an option is selected, show the value\r\n\t\t\tif(this.select.value !== \"\")\r\n\t\t\t{\r\n\t\t\t\tthis.webcimesSelect.classList.remove(\"placeholder\");\r\n\t\t\t\tthis.webcimesSelect.querySelector(\".text\")!.innerHTML = this.select.value;\r\n\t\t\t\tthis.webcimesSelect.querySelector(\".clear\")?.classList.add(\"active\");\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// If a placeholder string exist, show the value\r\n\t\t\t\tif(this.options.placeholder)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.webcimesSelect.classList.add(\"placeholder\");\r\n\t\t\t\t\tthis.webcimesSelect.querySelector(\".text\")!.innerHTML = this.options.placeholder;\r\n\t\t\t\t\tthis.webcimesSelect.querySelector(\".clear\")?.classList.remove(\"active\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Event clear selected options\r\n\t */\r\n\tprivate eventClearSelectedOptionsWebcimesSelect(e: Event)\r\n\t{\r\n\t\tthis.select!.value = \"\";\r\n\t\tthis.setWebcimesSelectValue();\r\n\t\tthis.destroyWebcimesDropDown();\r\n\t}\r\n\t\r\n\t/**\r\n\t * Event clear selected options\r\n\t */\r\n\tprivate eventKeyboardWebCimesSelect(e: KeyboardEvent)\r\n\t{\r\n\t\tif(!this.webcimesDropDown)\r\n\t\t{\r\n\t\t\t// Create dropdown\r\n\t\t\tif(e.key == \" \" || e.key == \"Enter\" || e.key == \"ArrowUp\" || e.key == \"ArrowDown\")\r\n\t\t\t{\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.createWebcimesDropDown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Event clear selected options\r\n\t */\r\n\tprivate eventOpenCloseWebcimesDropDown(e: KeyboardEvent)\r\n\t{\r\n\t\t// If webcimesSelectDropDown is null, create dropdown\r\n\t\tif(!this.webcimesDropDown && !(e.target as HTMLElement).closest(\".clear\"))\r\n\t\t{\r\n\t\t\tthis.createWebcimesDropDown();\r\n\t\t}\r\n\t\t// Close dropdown\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.destroyWebcimesDropDown();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Create dropdown\r\n\t */\r\n\tprivate createWebcimesDropDown()\r\n\t{\r\n\t\tthis.webcimesSelect.classList.add(\"open\");\r\n\t\t\t\t\t\r\n\t\t// Append webcimesSelectDropDown after select\r\n\t\tdocument.body.insertAdjacentHTML(\"beforeend\", \r\n\t\t\t`<div class=\"webcimesSelectDropDown\" ${(this.select!.getAttribute(\"dir\")==\"rtl\"?`dir=\"rtl\"`:``)}>\r\n\t\t\t\t${(this.options.allowSearch?`<div class=\"search\"><input type=\"text\" name=\"search\" autocomplete=\"off\" ${(this.options.searchPlaceholder?`placeholder=\"${this.options.searchPlaceholder}\"`:``)}></div>`:``)}\r\n\t\t\t\t<div class=\"options\" style=\"max-height:${this.options.maxHeightOptions};\"></div>\r\n\t\t\t</div>`\r\n\t\t);\r\n\r\n\t\t// Define webcimesSelectDropDown\r\n\t\tthis.webcimesDropDown = document.body.lastElementChild as HTMLElement;\r\n\r\n\t\t// Set options on webcimesSelectDropDown\r\n\t\tlet options = Array.from(this.select!.options).filter((el) => {\r\n\t\t\tif(el.value !== \"\")\r\n\t\t\t{\r\n\t\t\t\treturn el;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.setWebcimesDropDownOptions(Array.from(options));\r\n\t\t\r\n\t\t// Set position and width of dropdown\r\n\t\tthis.setWebcimesDropDownPositionAndWidth();\r\n\r\n\t\t// If allowSearch active\r\n\t\tif(this.options.allowSearch)\r\n\t\t{\r\n\t\t\tlet searchEl = (this.webcimesDropDown.querySelector(\"input[name='search']\") as HTMLInputElement);\r\n\r\n\t\t\t// Set focus on search field\r\n\t\t\tif(this.options.searchAutoFocus)\r\n\t\t\t{\r\n\t\t\t\tsearchEl.focus();\r\n\t\t\t}\r\n\r\n\t\t\t// Event - on search, refresh dropdown options\r\n\t\t\tsearchEl.addEventListener(\"input\", this.eventSearchWebcimesDropDown);\r\n\t\t}\r\n\r\n\t\t// Keyboard controls\r\n\t\tdocument.addEventListener(\"keydown\", this.eventKeyboardWebcimesDropDown);\r\n\t\t\r\n\t\t// Event - on resize refresh position and width of dropdown\r\n\t\twindow.addEventListener(\"resize\", this.eventResizeWebcimesDropDown);\r\n\r\n\t\t// Event - destroy webcimesSelectDropDown on click outside\r\n\t\tdocument.addEventListener(\"click\", this.eventDestroyWebcimesDropDown);\r\n\t}\r\n\r\n\t/**\r\n\t * Set dropdown options\r\n\t */\r\n\tprivate setWebcimesDropDownOptions(options: HTMLOptionElement[])\r\n\t{\r\n\t\t// Remove old event on select option\r\n\t\tthis.webcimesDropDown!.querySelectorAll(\".option:not(.disabled)\").forEach((el: HTMLElement) => {\r\n\t\t\tel.removeEventListener(\"click\", this.eventSelectOptionWebcimesDropDown);\r\n\t\t});\r\n\r\n\t\t// Set options\r\n\t\tlet optionsEl = document.createElement(\"template\");\r\n\t\toptions.forEach((el, index) => {\r\n\t\t\tlet optionEl = document.createElement(\"template\");\r\n\t\t\toptionEl.innerHTML = `<div class=\"option ${index==0?\"highlighted\":\"\"} ${(el.disabled?`disabled`:``)} ${el.classList.toString()}\" data-value=\"${el.value}\">${el.innerHTML}</div>\\n`;\r\n\r\n\t\t\t// If option has optgroup parent\r\n\t\t\tif(el.closest(\"optgroup\"))\r\n\t\t\t{\r\n\t\t\t\tlet label = el.closest(\"optgroup\")!.label;\r\n\r\n\t\t\t\t// Create the optgroup if has not already been created\r\n\t\t\t\tif(!optionsEl.content.querySelector(`.optGroup[data-label='${label}']`))\r\n\t\t\t\t{\r\n\t\t\t\t\tlet optGroupEl = document.createElement(\"template\");\r\n\t\t\t\t\toptGroupEl.innerHTML = \r\n\t\t\t\t\t`<div class=\"optGroup\" data-label=\"${label}\">\r\n\t\t\t\t\t\t<div class=\"label\">${label}</div>\r\n\t\t\t\t\t</div>\\n`;\r\n\t\t\t\t\toptionsEl.content.appendChild(optGroupEl.content);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Add option to optgroup\r\n\t\t\t\toptionsEl.content.querySelector(`.optGroup[data-label='${label}']`)?.appendChild(optionEl.content);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// Add option to options\r\n\t\t\t\toptionsEl.content.appendChild(optionEl.content);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.webcimesDropDown!.querySelector(\".options\")!.replaceChildren(optionsEl.content);\r\n\r\n\t\t// Event - on select option\r\n\t\tthis.webcimesDropDown!.querySelectorAll(\".option:not(.disabled)\").forEach((el: HTMLElement) => {\r\n\t\t\tel.addEventListener(\"click\", this.eventSelectOptionWebcimesDropDown);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Set dropdown position and width, relative to webcimesSelect\r\n\t */\r\n\tprivate setWebcimesDropDownPositionAndWidth(keepDirection: boolean = false)\r\n\t{\r\n\t\tif(this.webcimesDropDown)\r\n\t\t{\r\n\t\t\tlet webcimesSelectRect = this.webcimesSelect.getBoundingClientRect();\r\n\r\n\t\t\t// If the dropdown is too high for the bottom of the window, then we direct it to the top (or if keepDirection set to true and directionTop already exist)\r\n\t\t\tif(\r\n\t\t\t\t(keepDirection && this.webcimesSelect.classList.contains(\"directionTop\")) || \r\n\t\t\t\t(!keepDirection && webcimesSelectRect.bottom + this.webcimesDropDown.getBoundingClientRect().height > window.innerHeight)\r\n\t\t\t)\r\n\t\t\t{\r\n\t\t\t\tthis.webcimesSelect.classList.remove(\"directionBottom\");\r\n\t\t\t\tthis.webcimesSelect.classList.add(\"directionTop\");\r\n\t\t\t\tthis.webcimesDropDown.classList.remove(\"directionBottom\");\r\n\t\t\t\tthis.webcimesDropDown.classList.add(\"directionTop\");\r\n\t\t\t\tthis.webcimesDropDown.style.top = (webcimesSelectRect.top - this.webcimesDropDown.getBoundingClientRect().height + window.scrollY)+\"px\";\r\n\t\t\t}\r\n\t\t\t// Else direct it to the bottom\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.webcimesSelect.classList.remove(\"directionTop\");\r\n\t\t\t\tthis.webcimesSelect.classList.add(\"directionBottom\");\r\n\t\t\t\tthis.webcimesDropDown.classList.remove(\"directionTop\");\r\n\t\t\t\tthis.webcimesDropDown.classList.add(\"directionBottom\");\r\n\t\t\t\tthis.webcimesDropDown.style.top = (webcimesSelectRect.bottom + window.scrollY)+\"px\";\r\n\t\t\t}\r\n\r\n\t\t\t// Set dropdown left position\r\n\t\t\tthis.webcimesDropDown.style.left = (webcimesSelectRect.left + window.scrollX)+\"px\";\r\n\r\n\t\t\t// Set dropdown width\r\n\t\t\tthis.webcimesDropDown.style.width = webcimesSelectRect.width+\"px\";\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Destroy dropdown\r\n\t */\r\n\tprivate destroyWebcimesDropDown()\r\n\t{\r\n\t\tif(this.webcimesDropDown)\r\n\t\t{\r\n\t\t\tthis.webcimesSelect.classList.remove(\"open\");\r\n\t\t\tthis.webcimesSelect.focus();\r\n\t\t\t(this.webcimesDropDown.querySelector(\"input[name='search']\") as HTMLElement).removeEventListener(\"input\", this.eventSearchWebcimesDropDown);\r\n\t\t\tdocument.removeEventListener(\"keydown\", this.eventKeyboardWebcimesDropDown);\r\n\t\t\twindow.removeEventListener(\"resize\", this.eventResizeWebcimesDropDown);\r\n\t\t\tdocument.removeEventListener(\"click\", this.eventDestroyWebcimesDropDown);\r\n\t\t\tthis.webcimesDropDown.querySelectorAll(\".option:not(.disabled)\").forEach((el: HTMLElement) => {\r\n\t\t\t\tel.removeEventListener(\"click\", this.eventSelectOptionWebcimesDropDown);\r\n\t\t\t});\r\n\t\t\tthis.webcimesDropDown.remove();\r\n\t\t\tthis.webcimesDropDown = null;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Event search dropdown options\r\n\t */\r\n\tprivate eventSearchWebcimesDropDown(e: Event)\r\n\t{\r\n\t\t// Search options\r\n\t\tlet regexSearch = new RegExp((e.target as HTMLInputElement).value, \"i\");\r\n\t\tlet options = Array.from(this.select!.options).filter((el) => {\r\n\t\t\tif(el.value !== \"\")\r\n\t\t\t{\r\n\t\t\t\tif(regexSearch.test(el.innerHTML) || regexSearch.test(el.value))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// If no option match the search, and searchTextNoResults not null, then show no results\r\n\t\tif(options.length == 0 && this.options.searchTextNoResults)\r\n\t\t{\r\n\t\t\tlet optionEl = document.createElement(\"option\");\r\n\t\t\toptionEl.classList.add(\"noResults\");\r\n\t\t\toptionEl.innerHTML = this.options.searchTextNoResults;\r\n\t\t\toptions.push(optionEl);\r\n\t\t}\r\n\r\n\t\t// Set options on webcimesSelectDropDown\r\n\t\tthis.setWebcimesDropDownOptions(options);\r\n\t\t\r\n\t\t// Set position and width of dropdown\r\n\t\tthis.setWebcimesDropDownPositionAndWidth(true);\r\n\t}\r\n\r\n\t/**\r\n\t * Event keyboard dropdown \r\n\t */\r\n\tprivate eventKeyboardWebcimesDropDown(e: KeyboardEvent)\r\n\t{\r\n\t\t// If KeyboardEvent not comming from webcimesSelect\r\n\t\tif(e.target != this.webcimesSelect)\r\n\t\t{\r\n\t\t\tlet highlightedOption = this.webcimesDropDown!.querySelector(\".option.highlighted\");\r\n\t\t\tif(highlightedOption)\r\n\t\t\t{\r\n\t\t\t\tlet optionsEl = this.webcimesDropDown!.querySelectorAll(`.option:not(.disabled)`);\r\n\t\t\t\tlet highlightedIndex = Array.from(optionsEl).indexOf(highlightedOption);\r\n\t\t\t\tif(e.key == \"ArrowUp\" || e.key == \"ArrowDown\")\r\n\t\t\t\t{\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\thighlightedOption.classList.remove(\"highlighted\");\r\n\t\t\t\t\thighlightedOption = optionsEl[(e.key == \"ArrowUp\" ? (highlightedIndex-1 >= 0 ? highlightedIndex-1 : 0) : (highlightedIndex+1 <= optionsEl.length-1 ? highlightedIndex+1 : optionsEl.length-1))];\r\n\t\t\t\t\thighlightedOption.classList.add(\"highlighted\");\r\n\t\t\t\t\thighlightedOption.scrollIntoView({behavior: \"smooth\", block: \"nearest\"});\r\n\t\t\t\t}\r\n\t\t\t\tif(e.key == \"Enter\")\r\n\t\t\t\t{\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\thighlightedOption.classList.remove(\"highlighted\");\r\n\t\t\t\t\tthis.select!.value = highlightedOption.getAttribute(\"data-value\") as string;\r\n\t\t\t\t\tthis.setWebcimesSelectValue();\r\n\t\t\t\t\tthis.destroyWebcimesDropDown();\r\n\t\t\t\t}\r\n\t\t\t\tif(e.key == \"Escape\")\r\n\t\t\t\t{\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tthis.destroyWebcimesDropDown();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Event resize\r\n\t */\r\n\tprivate eventResizeWebcimesDropDown(e: Event)\r\n\t{\r\n\t\tthis.setWebcimesDropDownPositionAndWidth();\r\n\t}\r\n\r\n\t/**\r\n\t * Event on select option\r\n\t */\r\n\tprivate eventSelectOptionWebcimesDropDown(e: Event)\r\n\t{\r\n\t\tthis.select!.value = (e.target as HTMLElement).getAttribute(\"data-value\") as string;\r\n\t\tthis.setWebcimesSelectValue();\r\n\t\tthis.destroyWebcimesDropDown();\r\n\t}\r\n\r\n\t/**\r\n\t * Event destroy dropdown on click outside\r\n\t */\r\n\tprivate eventDestroyWebcimesDropDown(e: Event)\r\n\t{\r\n\t\tif((e.target as HTMLElement).closest(\".webcimesSelect\") != this.webcimesSelect && (e.target as HTMLElement).closest(\".webcimesSelectDropDown\") != this.webcimesDropDown)\r\n\t\t{\r\n\t\t\tthis.destroyWebcimesDropDown();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Create select\r\n\t */\r\n\tconstructor(options: Options)\r\n\t{\r\n\t\t// Defaults\r\n\t\tconst defaults: Options = {\r\n\t\t\telement: null,\r\n\t\t\tsetId: null,\r\n\t\t\tsetClass: null,\r\n\t\t\twidth: 'auto',\r\n\t\t\theight: 'auto',\r\n\t\t\tmaxHeightOptions: '200px',\r\n\t\t\tstyle: null,\r\n\t\t\tplaceholder: null,\r\n\t\t\tallowClear: true,\r\n\t\t\tallowSearch: true,\r\n\t\t\tsearchAutoFocus: true,\r\n\t\t\tsearchPlaceholder: \"Search\",\r\n\t\t\tsearchTextNoResults: \"No results found\",\r\n\t\t\tbeforeShow: () => {},\r\n\t\t\tafterShow: () => {},\r\n\t\t\tbeforeDestroy(){},\r\n\t\t\tafterDestroy: () => {},\r\n\t\t}\r\n\t\tthis.options = {...defaults, ...options};\r\n\r\n\t\t// Bind \"this\" to all events\r\n\t\tthis.eventClearSelectedOptionsWebcimesSelect = this.eventClearSelectedOptionsWebcimesSelect.bind(this);\r\n\t\tthis.eventKeyboardWebCimesSelect = this.eventKeyboardWebCimesSelect.bind(this);\r\n\t\tthis.eventOpenCloseWebcimesDropDown = this.eventOpenCloseWebcimesDropDown.bind(this);\r\n\t\tthis.eventSearchWebcimesDropDown = this.eventSearchWebcimesDropDown.bind(this);\r\n\t\tthis.eventKeyboardWebcimesDropDown = this.eventKeyboardWebcimesDropDown.bind(this);\r\n\t\tthis.eventResizeWebcimesDropDown = this.eventResizeWebcimesDropDown.bind(this);\r\n\t\tthis.eventSelectOptionWebcimesDropDown = this.eventSelectOptionWebcimesDropDown.bind(this);\r\n\t\tthis.eventDestroyWebcimesDropDown = this.eventDestroyWebcimesDropDown.bind(this);\r\n\t\t\r\n\t\t// Call init method\r\n\t\tthis.init();\r\n\t}\r\n\r\n\t/**\r\n\t * Initialization of the current select\r\n\t */\r\n    private init()\r\n\t{\r\n\t\t// Define select\r\n\t\tthis.select = this.getHtmlElement(this.options.element) as HTMLSelectElement | null;\r\n\t\tif(this.select)\r\n\t\t{\r\n\t\t\t// Hide select\r\n\t\t\tthis.select.style.display = \"none\";\r\n\r\n\t\t\t// Append webcimesSelect after select\r\n\t\t\tthis.select.insertAdjacentHTML(\"afterend\", \r\n\t\t\t\t`<div class=\"webcimesSelect ${(this.options.setClass?this.options.setClass:'')}\" ${(this.options.setId?`id=\"${this.options.setId}\"`:``)} ${(this.select.getAttribute(\"dir\")==\"rtl\"?`dir=\"rtl\"`:``)} tabindex=\"0\">\r\n\t\t\t\t\t<div class=\"text\"></div>\r\n\t\t\t\t\t${(this.options.allowClear?`<div class=\"clear\"><div class=\"cross\"></div></div>`:'')}\r\n\t\t\t\t</div>`\r\n\t\t\t);\r\n\r\n\t\t\t// Define webcimesSelect\r\n\t\t\tthis.webcimesSelect = this.select.nextElementSibling as HTMLElement;\r\n\r\n\t\t\t// Set placeholder\r\n\t\t\tif(!this.options.placeholder)\r\n\t\t\t{\r\n\t\t\t\tif(this.select.querySelector(\"option[value='']\"))\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.options.placeholder = this.select.querySelector(\"option[value='']\")!.innerHTML;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Set webcimesSelect value (or placeholder)\r\n\t\t\tthis.setWebcimesSelectValue();\r\n\r\n\t\t\t// Event - clear selected options\r\n\t\t\tthis.webcimesSelect.querySelector(\".clear\")?.addEventListener(\"click\", this.eventClearSelectedOptionsWebcimesSelect);\r\n\r\n\t\t\t// Event - keyboard controls\r\n\t\t\tthis.webcimesSelect.addEventListener(\"keydown\", this.eventKeyboardWebCimesSelect);\r\n\r\n\t\t\t// Event - create webcimesSelectDropDown on click\r\n\t\t\tthis.webcimesSelect.addEventListener(\"click\", this.eventOpenCloseWebcimesDropDown);\r\n\t\t}\r\n\r\n\t\t// Callback before show select (set a timeout of zero, to wait for some dom to load)\r\n\t\t// setTimeout(() => {\r\n\t\t// \tthis.select.dispatchEvent(new CustomEvent(\"beforeShow\"));\r\n\t\t// \tif(typeof this.options.beforeShow === 'function')\r\n\t\t// \t{\r\n\t\t// \t\tthis.options.beforeShow();\r\n\t\t// \t}\r\n\t\t// }, 0);\r\n\t\r\n\t\t// // Width of select\r\n\t\t// if(this.options.width != \"auto\" && this.options.width)\r\n\t\t// {\r\n\t\t// \tthis.select.style.setProperty(\"width\", this.options.width);\r\n\t\t// }\r\n\t\r\n\t\t// // Height of select\r\n\t\t// if(this.options.height != \"auto\" && this.options.height)\r\n\t\t// {\r\n\t\t// \tthis.select.style.setProperty(\"height\", this.options.height);\r\n\t\t// }\r\n\t\r\n\t\t// // Style\r\n\t\t// if(this.options.style)\r\n\t\t// {\r\n\t\t// \tlet oldStyle = this.select.getAttribute(\"style\");\r\n\t\t// \tthis.select.setAttribute(\"style\", oldStyle+this.options.style);\r\n\t\t// }\r\n    }\r\n\r\n\t/**\r\n\t * Destroy current select\r\n\t */\r\n\tpublic destroy()\r\n\t{\r\n\t\t// Callback before destroy select\r\n\t\tthis.webcimesSelect.dispatchEvent(new CustomEvent(\"beforeDestroy\"));\r\n\t\tif(typeof this.options.beforeDestroy === 'function')\r\n\t\t{\r\n\t\t\tthis.options.beforeDestroy();\r\n\t\t}\r\n\r\n\t\t\r\n\t\tthis.webcimesSelect.querySelector(\".clear\")?.removeEventListener(\"click\", this.eventClearSelectedOptionsWebcimesSelect);\r\n\t\tthis.webcimesSelect.removeEventListener(\"keydown\", this.eventKeyboardWebCimesSelect);\r\n\t\tthis.webcimesSelect.removeEventListener(\"click\", this.eventOpenCloseWebcimesDropDown);\r\n\r\n\t\t// // Callback after destroy select\r\n\t\t// this.select.dispatchEvent(new CustomEvent(\"afterDestroy\"));\r\n\t\t// if(typeof this.options.afterDestroy === 'function')\r\n\t\t// {\r\n\t\t// \tthis.options.afterDestroy();\r\n\t\t// }\r\n\t}\r\n}"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","WebcimesSelect","select","webcimesSelect","webcimesDropDown","options","getHtmlElements","element","htmlElements","NodeList","Array","from","HTMLElement","document","querySelectorAll","getHtmlElement","htmlElement","querySelector","setWebcimesSelectValue","this","value","classList","remove","innerHTML","add","placeholder","eventClearSelectedOptionsWebcimesSelect","e","destroyWebcimesDropDown","eventKeyboardWebCimesSelect","preventDefault","createWebcimesDropDown","eventOpenCloseWebcimesDropDown","target","closest","body","insertAdjacentHTML","getAttribute","allowSearch","searchPlaceholder","maxHeightOptions","lastElementChild","filter","el","setWebcimesDropDownOptions","setWebcimesDropDownPositionAndWidth","searchEl","searchAutoFocus","focus","addEventListener","eventSearchWebcimesDropDown","eventKeyboardWebcimesDropDown","window","eventResizeWebcimesDropDown","eventDestroyWebcimesDropDown","forEach","removeEventListener","eventSelectOptionWebcimesDropDown","optionsEl","createElement","index","optionEl","disabled","toString","label","content","optGroupEl","appendChild","replaceChildren","keepDirection","webcimesSelectRect","getBoundingClientRect","contains","bottom","height","innerHeight","style","top","scrollY","left","scrollX","width","regexSearch","RegExp","test","length","searchTextNoResults","push","highlightedOption","highlightedIndex","indexOf","scrollIntoView","behavior","block","constructor","defaults","setId","setClass","allowClear","beforeShow","afterShow","beforeDestroy","afterDestroy","bind","init","display","nextElementSibling","destroy","dispatchEvent","CustomEvent"],"sourceRoot":""}