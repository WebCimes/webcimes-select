{"version":3,"file":"js/webcimes-select.udm.js","mappings":"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","sources":["webpack://webcimes-select/webpack/universalModuleDefinition","webpack://webcimes-select/webpack/bootstrap","webpack://webcimes-select/webpack/runtime/define property getters","webpack://webcimes-select/webpack/runtime/hasOwnProperty shorthand","webpack://webcimes-select/webpack/runtime/make namespace object","webpack://webcimes-select/./src/ts/webcimes-select.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\r\n * Copyright (c) 2023 WebCimes - RICHARD Florian (https://webcimes.com)\r\n * MIT License - https://choosealicense.com/licenses/mit/\r\n * Date: 2023-03-25\r\n */\r\n\r\n\"use strict\";\r\n\r\n/**\r\n * Global\r\n */\r\ndeclare global {\r\n\t/** Events */\r\n\tinterface GlobalEventHandlersEventMap {\r\n\t\tbeforeShow: CustomEvent;\r\n\t\tafterShow: CustomEvent;\r\n\t\tbeforeDestroy: CustomEvent;\r\n\t\tafterDestroy: CustomEvent;\r\n\t}\r\n}\r\n\r\n/**\r\n * Options\r\n */\r\ninterface Options {\r\n\t/** Element (selector string or HTMLElement) */\r\n\telement: string | HTMLElement | null;\r\n\t/** set a specific id on the select. default \"null\" */\r\n\tsetId: string | null;\r\n\t/** set a specific class on the select, default \"null\" */\r\n\tsetClass: string | null;\r\n\t/** width (specify unit), default \"auto\" */\r\n\twidth: string;\r\n\t/** height (specify unit), default \"auto\" */\r\n\theight: string;\r\n\t/** max-height for options list (specify unit), default \"200px\" */\r\n\tmaxHeightOptions: string;\r\n\t/** add extra css style to select, default null */\r\n\tstyle: string | null;\r\n\t/** set placeholder, default null */\r\n\tplaceholder: string | null;\r\n\t/** allow clear selected options, default true */\r\n\tallowClear: boolean;\r\n\t/** allow search options, default true */\r\n\tallowSearch: boolean;\r\n\t/** autofocus on search field when open select, default true */\r\n\tsearchAutoFocus: boolean;\r\n\t/** set placeholder on search field, default \"Search\" */\r\n\tsearchPlaceholder: string | null;\r\n\t/** set text for no results found on search, default \"No results found\" */\r\n\tsearchTextNoResults: string | null;\r\n\t/** callback before show select */\r\n\tbeforeShow: () => void;\r\n\t/** callback after show select */\r\n\tafterShow: () => void;\r\n\t/** callback before destroy select */\r\n\tbeforeDestroy: () => void;\r\n\t/** callback after destroy select */\r\n\tafterDestroy: () => void;\r\n}\r\n\r\n/**\r\n * Class WebcimesSelect\r\n */\r\nexport class WebcimesSelect\r\n{\r\n\t/** Get the dom element of the current select */\r\n\tpublic select: HTMLSelectElement | null;\r\n\t\r\n\t/** Get the dom element of the current webcimesSelect */\r\n\tpublic webcimesSelect: HTMLElement;\r\n\t\r\n\t/** Get the dom element of the current dropDown */\r\n\tpublic webcimesSelectDropDown: HTMLElement | null = null;\r\n\r\n\t/** Options of the current select */\r\n\tprivate options: Options;\r\n\r\n\t/**\r\n\t * Convert elements entry to an array of HTMLElement\r\n\t */\r\n\tprivate getHtmlElements = (element: string | HTMLElement | NodeList | null) => {\r\n\t\t// Convert options.element to an array of HTMLElement\r\n\t\tlet htmlElements: HTMLElement[] = [];\r\n\t\tif(element instanceof NodeList)\r\n\t\t{\r\n\t\t\thtmlElements = [...Array.from(element) as HTMLElement[]];\r\n\t\t}\r\n\t\tif(element instanceof HTMLElement)\r\n\t\t{\r\n\t\t\thtmlElements = [...[element]];\r\n\t\t}\r\n\t\tif(typeof element === \"string\")\r\n\t\t{\r\n\t\t\thtmlElements = [...Array.from(document.querySelectorAll(element)) as HTMLElement[]];\r\n\t\t}\r\n\t\treturn htmlElements;\r\n\t};\r\n\r\n\t/**\r\n\t * Convert element entry to an HTMLElement\r\n\t */\r\n\tprivate getHtmlElement = (element: string | HTMLElement | null) => {\r\n\t\t// Convert options.element to an array of HTMLElement\r\n\t\tlet htmlElement: HTMLElement | null = null;\r\n\t\tif(element instanceof HTMLElement)\r\n\t\t{\r\n\t\t\thtmlElement = element;\r\n\t\t}\r\n\t\tif(typeof element === \"string\")\r\n\t\t{\r\n\t\t\thtmlElement = document.querySelector(element) as HTMLElement | null;\r\n\t\t}\r\n\t\treturn htmlElement;\r\n\t};\r\n\r\n\t/**\r\n\t * Set value (or placeholder) on webcimesSelect\r\n\t */\r\n\tprivate setSelectedValue()\r\n\t{\r\n\t\tif(this.select)\r\n\t\t{\r\n\t\t\t// If an option is selected, show the value\r\n\t\t\tif(this.select.value !== \"\")\r\n\t\t\t{\r\n\t\t\t\tthis.webcimesSelect.classList.remove(\"placeholder\");\r\n\t\t\t\tthis.webcimesSelect.querySelector(\".text\")!.innerHTML = this.select.value;\r\n\t\t\t\tthis.webcimesSelect.querySelector(\".clear\")?.classList.add(\"active\");\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// If a placeholder string exist, show the value\r\n\t\t\t\tif(this.options.placeholder)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.webcimesSelect.classList.add(\"placeholder\");\r\n\t\t\t\t\tthis.webcimesSelect.querySelector(\".text\")!.innerHTML = this.options.placeholder;\r\n\t\t\t\t\tthis.webcimesSelect.querySelector(\".clear\")?.classList.remove(\"active\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Set dropdown options\r\n\t */\r\n\tprivate setDropDownOptions(options: HTMLOptionElement[])\r\n\t{\r\n\t\t// Remove old event on select option\r\n\t\tthis.webcimesSelectDropDown!.querySelectorAll(\".option\").forEach((el: HTMLElement) => {\r\n\t\t\tel.removeEventListener(\"click\", this.eventSelectOptionDropDown);\r\n\t\t});\r\n\r\n\t\t// Set options\r\n\t\tlet optionsEl = document.createElement(\"template\");\r\n\t\toptions.forEach((el, index) => {\r\n\t\t\tlet optionEl = document.createElement(\"template\");\r\n\t\t\toptionEl.innerHTML = `<div class=\"option ${index==0?\"highlighted\":\"\"} ${el.classList.toString()}\" data-value=\"${el.value}\">${el.innerHTML}</div>\\n`;\r\n\r\n\t\t\t// If option has optgroup parent\r\n\t\t\tif(el.closest(\"optgroup\"))\r\n\t\t\t{\r\n\t\t\t\tlet label = el.closest(\"optgroup\")!.label;\r\n\r\n\t\t\t\t// Create the optgroup if has not already been created\r\n\t\t\t\tif(!optionsEl.content.querySelector(`.optGroup[data-label='${label}']`))\r\n\t\t\t\t{\r\n\t\t\t\t\tlet optGroupEl = document.createElement(\"template\");\r\n\t\t\t\t\toptGroupEl.innerHTML = \r\n\t\t\t\t\t`<div class=\"optGroup\" data-label=\"${label}\">\r\n\t\t\t\t\t\t<div class=\"label\">${label}</div>\r\n\t\t\t\t\t</div>\\n`;\r\n\t\t\t\t\toptionsEl.content.appendChild(optGroupEl.content);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Add option to optgroup\r\n\t\t\t\toptionsEl.content.querySelector(`.optGroup[data-label='${label}']`)?.appendChild(optionEl.content);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// Add option to options\r\n\t\t\t\toptionsEl.content.appendChild(optionEl.content);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.webcimesSelectDropDown!.querySelector(\".options\")!.replaceChildren(optionsEl.content);\r\n\r\n\t\t// Event - on select option\r\n\t\tthis.webcimesSelectDropDown!.querySelectorAll(\".option\").forEach((el: HTMLElement) => {\r\n\t\t\tel.addEventListener(\"click\", this.eventSelectOptionDropDown);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Set dropdown position and width, relative to webcimesSelect\r\n\t */\r\n\tprivate setDropDownPositionAndWidth(keepDirection: boolean = false)\r\n\t{\r\n\t\tif(this.webcimesSelectDropDown)\r\n\t\t{\r\n\t\t\tlet webcimesSelectRect = this.webcimesSelect.getBoundingClientRect();\r\n\r\n\t\t\t// If the dropdown is too high for the bottom of the window, then we direct it to the top (or if keepDirection set to true and directionTop already exist)\r\n\t\t\tif(\r\n\t\t\t\t(keepDirection && this.webcimesSelect.classList.contains(\"directionTop\")) || \r\n\t\t\t\t(!keepDirection && webcimesSelectRect.bottom + this.webcimesSelectDropDown.getBoundingClientRect().height > window.innerHeight)\r\n\t\t\t)\r\n\t\t\t{\r\n\t\t\t\tthis.webcimesSelect.classList.remove(\"directionBottom\");\r\n\t\t\t\tthis.webcimesSelect.classList.add(\"directionTop\");\r\n\t\t\t\tthis.webcimesSelectDropDown.classList.remove(\"directionBottom\");\r\n\t\t\t\tthis.webcimesSelectDropDown.classList.add(\"directionTop\");\r\n\t\t\t\tthis.webcimesSelectDropDown.style.top = (webcimesSelectRect.top - this.webcimesSelectDropDown.getBoundingClientRect().height + window.scrollY)+\"px\";\r\n\t\t\t}\r\n\t\t\t// Else direct it to the bottom\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.webcimesSelect.classList.remove(\"directionTop\");\r\n\t\t\t\tthis.webcimesSelect.classList.add(\"directionBottom\");\r\n\t\t\t\tthis.webcimesSelectDropDown.classList.remove(\"directionTop\");\r\n\t\t\t\tthis.webcimesSelectDropDown.classList.add(\"directionBottom\");\r\n\t\t\t\tthis.webcimesSelectDropDown.style.top = (webcimesSelectRect.bottom + window.scrollY)+\"px\";\r\n\t\t\t}\r\n\r\n\t\t\t// Set dropdown left position\r\n\t\t\tthis.webcimesSelectDropDown.style.left = (webcimesSelectRect.left + window.scrollX)+\"px\";\r\n\r\n\t\t\t// Set dropdown width\r\n\t\t\tthis.webcimesSelectDropDown.style.width = webcimesSelectRect.width+\"px\";\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Destroy dropdown\r\n\t */\r\n\tprivate destroyDropDown()\r\n\t{\r\n\t\tif(this.webcimesSelectDropDown)\r\n\t\t{\r\n\t\t\tthis.webcimesSelect.classList.remove(\"open\");\r\n\t\t\tthis.webcimesSelect.focus();\r\n\t\t\t(this.webcimesSelectDropDown.querySelector(\"input[name='search']\") as HTMLElement).removeEventListener(\"input\", this.eventSearchDropDown);\r\n\t\t\tdocument.removeEventListener(\"keydown\", this.eventKeyboardControlsDropDown);\r\n\t\t\twindow.removeEventListener(\"resize\", this.eventResizeDropDown);\r\n\t\t\tdocument.addEventListener(\"click\", this.eventDestroyDropDown);\r\n\t\t\tthis.webcimesSelectDropDown.querySelectorAll(\".option\").forEach((el: HTMLElement) => {\r\n\t\t\t\tel.removeEventListener(\"click\", this.eventSelectOptionDropDown);\r\n\t\t\t});\r\n\t\t\tthis.webcimesSelectDropDown.remove();\r\n\t\t\tthis.webcimesSelectDropDown = null;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Event search dropdown options\r\n\t */\r\n\tprivate eventSearchDropDown: (e: Event) => void = (e) => {\r\n\t\t// Search options\r\n\t\tlet regexSearch = new RegExp((e.target as HTMLInputElement).value, \"i\");\r\n\t\tlet options = Array.from(this.select!.options).filter((el) => {\r\n\t\t\tif(el.value !== \"\")\r\n\t\t\t{\r\n\t\t\t\tif(regexSearch.test(el.innerHTML) || regexSearch.test(el.value))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// If no option match the search, and searchTextNoResults not null, then show no results\r\n\t\tif(options.length == 0 && this.options.searchTextNoResults)\r\n\t\t{\r\n\t\t\tlet optionEl = document.createElement(\"option\");\r\n\t\t\toptionEl.classList.add(\"noResults\");\r\n\t\t\toptionEl.innerHTML = this.options.searchTextNoResults;\r\n\t\t\toptions.push(optionEl);\r\n\t\t}\r\n\r\n\t\t// Set options on webcimesSelectDropDown\r\n\t\tthis.setDropDownOptions(options);\r\n\t\t\r\n\t\t// Set position and width of dropdown\r\n\t\tthis.setDropDownPositionAndWidth(true);\r\n\t};\r\n\r\n\t/**\r\n\t * Event keyboard dropdown \r\n\t */\r\n\tprivate eventKeyboardControlsDropDown: (e: KeyboardEvent) => void = (e) => {\r\n\t\t// If KeyboardEvent not comming from webcimesSelect\r\n\t\tif(e.target != this.webcimesSelect)\r\n\t\t{\r\n\t\t\tlet highlightedOption = this.webcimesSelectDropDown!.querySelector(\".option.highlighted\");\r\n\t\t\tif(highlightedOption)\r\n\t\t\t{\r\n\t\t\t\tlet optionsEl = this.webcimesSelectDropDown!.querySelectorAll(`.option`);\r\n\t\t\t\tlet highlightedIndex = Array.from(optionsEl).indexOf(highlightedOption);\r\n\t\t\t\tif(e.key == \"ArrowUp\" || e.key == \"ArrowDown\")\r\n\t\t\t\t{\r\n\t\t\t\t\thighlightedOption.classList.remove(\"highlighted\");\r\n\t\t\t\t\thighlightedOption = optionsEl[(e.key == \"ArrowUp\" ? (highlightedIndex-1 >= 0 ? highlightedIndex-1 : 0) : (highlightedIndex+1 <= optionsEl.length-1 ? highlightedIndex+1 : optionsEl.length-1))];\r\n\t\t\t\t\thighlightedOption.classList.add(\"highlighted\");\r\n\t\t\t\t\thighlightedOption.scrollIntoView({behavior: \"smooth\", block: \"nearest\"});\r\n\t\t\t\t}\r\n\t\t\t\tif(e.key == \"Enter\")\r\n\t\t\t\t{\r\n\t\t\t\t\thighlightedOption.classList.remove(\"highlighted\");\r\n\t\t\t\t\tthis.select!.value = highlightedOption.getAttribute(\"data-value\") as string;\r\n\t\t\t\t\tthis.setSelectedValue();\r\n\t\t\t\t\tthis.destroyDropDown();\r\n\t\t\t\t}\r\n\t\t\t\tif(e.key == \"Escape\")\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.destroyDropDown();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Event resize\r\n\t */\r\n\tprivate eventResizeDropDown: () => void = () => {\r\n\t\tthis.setDropDownPositionAndWidth();\r\n\t};\r\n\r\n\t/**\r\n\t * Event on select option\r\n\t */\r\n\tprivate eventSelectOptionDropDown: (e: Event) => void = (e) => {\r\n\t\tthis.select!.value = (e.target as HTMLElement).getAttribute(\"data-value\") as string;\r\n\t\tthis.setSelectedValue();\r\n\t};\r\n\r\n\t/**\r\n\t * Event destroy dropdown on click outside\r\n\t */\r\n\tprivate eventDestroyDropDown: (e: Event) => void = (e) => {\r\n\t\tif((e.target as HTMLElement).closest(\".webcimesSelect\") != this.webcimesSelect && !(e.target as HTMLElement).closest(\".webcimesSelectDropDown input[name='search']\"))\r\n\t\t{\r\n\t\t\tthis.destroyDropDown();\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Create select\r\n\t */\r\n\tconstructor(options: Options)\r\n\t{\r\n\t\t// Defaults\r\n\t\tconst defaults: Options = {\r\n\t\t\telement: null,\r\n\t\t\tsetId: null,\r\n\t\t\tsetClass: null,\r\n\t\t\twidth: 'auto',\r\n\t\t\theight: 'auto',\r\n\t\t\tmaxHeightOptions: '200px',\r\n\t\t\tstyle: null,\r\n\t\t\tplaceholder: null,\r\n\t\t\tallowClear: true,\r\n\t\t\tallowSearch: true,\r\n\t\t\tsearchAutoFocus: true,\r\n\t\t\tsearchPlaceholder: \"Search\",\r\n\t\t\tsearchTextNoResults: \"No results found\",\r\n\t\t\tbeforeShow: () => {},\r\n\t\t\tafterShow: () => {},\r\n\t\t\tbeforeDestroy: () => {},\r\n\t\t\tafterDestroy: () => {},\r\n\t\t}\r\n\t\tthis.options = {...defaults, ...options};\r\n\t\t\r\n\t\t// Call init method\r\n\t\tthis.init();\r\n\t}\r\n\r\n\t/**\r\n\t * Initialization of the current select\r\n\t */\r\n    private init()\r\n\t{\r\n\t\t// Define select\r\n\t\tthis.select = this.getHtmlElement(this.options.element) as HTMLSelectElement | null;\r\n\t\tif(this.select)\r\n\t\t{\r\n\t\t\t// Hide select\r\n\t\t\tthis.select.style.display = \"none\";\r\n\r\n\t\t\t// Append webcimesSelect after select\r\n\t\t\tthis.select.insertAdjacentHTML(\"afterend\", \r\n\t\t\t\t`<div class=\"webcimesSelect ${(this.options.setClass?this.options.setClass:'')}\" ${(this.options.setId?`id=\"${this.options.setId}\"`:``)} tabindex=\"0\">\r\n\t\t\t\t\t<div class=\"text\"></div>\r\n\t\t\t\t\t${(this.options.allowClear?`<div class=\"clear\"><div class=\"cross\"></div></div>`:'')}\r\n\t\t\t\t</div>`\r\n\t\t\t);\r\n\r\n\t\t\t// Define webcimesSelect\r\n\t\t\tthis.webcimesSelect = this.select.nextElementSibling as HTMLElement;\r\n\r\n\t\t\t// Set placeholder\r\n\t\t\tif(!this.options.placeholder)\r\n\t\t\t{\r\n\t\t\t\tif(this.select.querySelector(\"option[value='']\"))\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.options.placeholder = this.select.querySelector(\"option[value='']\")!.innerHTML;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Set webcimesSelect value (or placeholder)\r\n\t\t\tthis.setSelectedValue();\r\n\r\n\t\t\t// Event - clear selected options\r\n\t\t\tthis.webcimesSelect.querySelector(\".clear\")?.addEventListener(\"click\", (e) => {\r\n\t\t\t\tthis.select!.value = \"\";\r\n\t\t\t\tthis.setSelectedValue();\r\n\t\t\t\tthis.destroyDropDown();\r\n\t\t\t});\r\n\r\n\t\t\t// Event - keyboard controls\r\n\t\t\tthis.webcimesSelect?.addEventListener(\"keydown\", (e) => {\r\n\t\t\t\tif(e.key == \" \" || e.key == \"Enter\" || e.key == \"ArrowUp\" || e.key == \"ArrowDown\")\r\n\t\t\t\t{\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tthis.webcimesSelect.dispatchEvent(new Event(\"click\"));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Event - create webcimesSelectDropDown on click\r\n\t\t\tthis.webcimesSelect.addEventListener(\"click\", (e) => {\r\n\t\t\t\t// If webcimesSelectDropDown is null, create dropdown\r\n\t\t\t\tif(!this.webcimesSelectDropDown && !(e.target as HTMLElement).closest(\".clear\"))\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.webcimesSelect.classList.add(\"open\");\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Append webcimesSelectDropDown after select\r\n\t\t\t\t\tdocument.body.insertAdjacentHTML(\"beforeend\", \r\n\t\t\t\t\t\t`<div class=\"webcimesSelectDropDown\">\r\n\t\t\t\t\t\t\t${(this.options.allowSearch?`<div class=\"search\"><input type=\"text\" name=\"search\" autocomplete=\"off\" ${(this.options.searchPlaceholder?`placeholder=\"${this.options.searchPlaceholder}\"`:``)}></div>`:``)}\r\n\t\t\t\t\t\t\t<div class=\"options\" style=\"max-height:${this.options.maxHeightOptions};\"></div>\r\n\t\t\t\t\t\t</div>`\r\n\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t// Define webcimesSelectDropDown\r\n\t\t\t\t\tthis.webcimesSelectDropDown = document.body.lastElementChild as HTMLElement;\r\n\r\n\t\t\t\t\t// Set options on webcimesSelectDropDown\r\n\t\t\t\t\tlet options = Array.from(this.select!.options).filter((el) => {\r\n\t\t\t\t\t\tif(el.value !== \"\")\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn el;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.setDropDownOptions(Array.from(options));\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Set position and width of dropdown\r\n\t\t\t\t\tthis.setDropDownPositionAndWidth();\r\n\r\n\t\t\t\t\t// If allowSearch active\r\n\t\t\t\t\tif(this.options.allowSearch)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet searchEl = (this.webcimesSelectDropDown.querySelector(\"input[name='search']\") as HTMLInputElement);\r\n\r\n\t\t\t\t\t\t// Set focus on search field\r\n\t\t\t\t\t\tif(this.options.searchAutoFocus)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsearchEl.focus();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Event - on search, refresh dropdown options\r\n\t\t\t\t\t\tsearchEl.addEventListener(\"input\", this.eventSearchDropDown);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Keyboard controls\r\n\t\t\t\t\tdocument.addEventListener(\"keydown\", this.eventKeyboardControlsDropDown);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Event - on resize refresh position and width of dropdown\r\n\t\t\t\t\twindow.addEventListener(\"resize\", this.eventResizeDropDown);\r\n\t\r\n\t\t\t\t\t// Event - destroy webcimesSelectDropDown on click outside\r\n\t\t\t\t\tdocument.addEventListener(\"click\", this.eventDestroyDropDown);\r\n\t\t\t\t}\r\n\t\t\t\t// Close dropdown\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.destroyDropDown();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t// Create select\r\n\t\t// document.body.insertAdjacentHTML(\"beforeend\", \r\n\t\t// \t`<div class=\"webcimesSelect `+(this.options.setClass?this.options.setClass:'')+`\" `+(this.options.setId?'id=\"'+this.options.setId+'\"':'')+`>\r\n\t\t// \t</div>`\r\n\t\t// );\r\n\t\t// this.select = document.body.lastChild as HTMLElement;\r\n\t\t\r\n\t\t// Callback before show select (set a timeout of zero, to wait for some dom to load)\r\n\t\t// setTimeout(() => {\r\n\t\t// \tthis.select.dispatchEvent(new CustomEvent(\"beforeShow\"));\r\n\t\t// \tif(typeof this.options.beforeShow === 'function')\r\n\t\t// \t{\r\n\t\t// \t\tthis.options.beforeShow();\r\n\t\t// \t}\r\n\t\t// }, 0);\r\n\t\r\n\t\t// // Width of select\r\n\t\t// if(this.options.width != \"auto\" && this.options.width)\r\n\t\t// {\r\n\t\t// \tthis.select.style.setProperty(\"width\", this.options.width);\r\n\t\t// }\r\n\t\r\n\t\t// // Height of select\r\n\t\t// if(this.options.height != \"auto\" && this.options.height)\r\n\t\t// {\r\n\t\t// \tthis.select.style.setProperty(\"height\", this.options.height);\r\n\t\t// }\r\n\t\r\n\t\t// // Style\r\n\t\t// if(this.options.style)\r\n\t\t// {\r\n\t\t// \tlet oldStyle = this.select.getAttribute(\"style\");\r\n\t\t// \tthis.select.setAttribute(\"style\", oldStyle+this.options.style);\r\n\t\t// }\r\n    }\r\n\r\n\t/**\r\n\t * Destroy current select\r\n\t */\r\n\tpublic destroy()\r\n\t{\r\n\t\t// Callback before destroy select\r\n\t\t// this.select.dispatchEvent(new CustomEvent(\"beforeDestroy\"));\r\n\t\t// if(typeof this.options.beforeDestroy === 'function')\r\n\t\t// {\r\n\t\t// \tthis.options.beforeDestroy();\r\n\t\t// }\r\n\r\n\t\t// // Callback after destroy select\r\n\t\t// this.select.dispatchEvent(new CustomEvent(\"afterDestroy\"));\r\n\t\t// if(typeof this.options.afterDestroy === 'function')\r\n\t\t// {\r\n\t\t// \tthis.options.afterDestroy();\r\n\t\t// }\r\n\t}\r\n}"],"names":["root","factory","exports","module","define","amd","a","i","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","WebcimesSelect","select","webcimesSelect","webcimesSelectDropDown","options","getHtmlElements","element","htmlElements","NodeList","Array","from","HTMLElement","document","querySelectorAll","getHtmlElement","htmlElement","querySelector","setSelectedValue","this","classList","remove","innerHTML","add","placeholder","setDropDownOptions","forEach","el","removeEventListener","eventSelectOptionDropDown","optionsEl","createElement","index","optionEl","toString","closest","label","content","optGroupEl","appendChild","replaceChildren","addEventListener","setDropDownPositionAndWidth","keepDirection","webcimesSelectRect","getBoundingClientRect","contains","bottom","height","window","innerHeight","style","top","scrollY","left","scrollX","width","destroyDropDown","focus","eventSearchDropDown","eventKeyboardControlsDropDown","eventResizeDropDown","eventDestroyDropDown","e","regexSearch","RegExp","target","filter","test","length","searchTextNoResults","push","highlightedOption","highlightedIndex","indexOf","scrollIntoView","behavior","block","getAttribute","constructor","setId","setClass","maxHeightOptions","allowClear","allowSearch","searchAutoFocus","searchPlaceholder","beforeShow","afterShow","beforeDestroy","afterDestroy","init","display","insertAdjacentHTML","nextElementSibling","preventDefault","dispatchEvent","Event","body","lastElementChild","searchEl","destroy"],"sourceRoot":""}